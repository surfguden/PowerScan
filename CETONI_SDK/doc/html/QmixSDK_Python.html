<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>CETONI SDK: CETONI SDK for Python</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="HeaderLogo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">CETONI SDK
   &#160;<span id="projectnumber">20210607</span>
   </div>
   <div id="projectbrief">The software libraries for integration of all CETONI devices.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Table&#160;of&#160;contents</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('QmixSDK_Python.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">CETONI SDK for Python </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="python_header.svg"  align="center" style="padding-right: 10px; width: 690px;"/>
</div>
<h1><a class="anchor" id="section_python_integration"></a>
Python Integration</h1>
<p>The CETONI SDK comes with full Python integration. For Windows you find the Python integration in the subfolder <b>lib/python</b> and for Linux in the subfolder <b>python</b>. The Python integration is based on the CETONI SDK shared libraries and uses the Python ctypes module to access the C interface of the SDK libraries. </p><hr/>
<h1><a class="anchor" id="CAPI_TestsPython"></a>
Running Python tests</h1>
<p>With the test cases you can quickly check, if the CETONI SDK Python integration runs properly on your system. To run a test case, you should open a terminal and change into the python folder that contains the runtest.bat or runtest.sh file. Now you can execute the test cases on Windows with</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;run_pytest.bat test_qmixpump.py</div>
</div><!-- fragment --><p>or on Linux with</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;./run_pytest.sh test_qmixpump.py</div>
</div><!-- fragment --><p>For all tests a valid device configuration is required. You can pass in the device configuration folder as a parameter for a test. The <code>runtest.bat</code> or <code>runtest.sh</code> files use the simulated test configuration <code>config/testconfig_qmixsdk</code>. All devices in this test configuration are simulated. </p><hr/>
<h1><a class="anchor" id="section_using_python_integration"></a>
Using the Python Integration</h1>
<p>To use the CETONI SDK you need to create a valid device configuration. Read the <a class="el" href="GettingStarted.html">Getting Started</a> section to learn how to create a device configuration and what a device configuration is.</p>
<p>The python integration is essentially a wrapper for the C interface of the SDK. That means, you can use the <a href="modules.html">C API documentation</a> for the Python integration. The Python integration wraps the C interface into Python classes. That means, the functions in the <b>qmixbus.Bus</b> class are documented in the <a class="el" href="group__lcb__api.html">labbCAN Bus API</a>, the functions in the <b>qmixpump.Pump</b> class are documented in the <a class="el" href="group__lcp__api.html">labbCAN Pump API</a> and so on.</p>
<p>If you use the Python integration, then you need to ensure that Python finds the Python modules and the shared libraries of the SDK. To ensure that the <code>qmixsdk</code> module is found, the path to the module folder needs to be in the Python module search path. There are two ways to achieve that. The first way is, to write code in your python script before any CETONI SDK module import. In the following example we have installed the CETONI SDK on a Windows machine into the folder <b>C:/QmixSDK</b>. Now you need to write the following code into your Python file before you import anything from the <code>qmixsdk</code> module.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;import sys</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;sys.path.append(<span class="stringliteral">&quot;C:/QmixSDK/lib/python&quot;</span>)</div>
</div><!-- fragment --><p>The code appends the CETONI SDK module path <b>C:/QmixSDK/lib/python</b> to the module search path to enable Python to find the SDK modules.</p>
<p>The second way is to modify the <code>PYTHONPATH</code> environment variable to contain the directory where the <code>qmixsdk</code> module is located before starting the interpreter.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;set PYTHONPATH=C:\temp\QmixSDK64\lib\python;%PATHONPATH%;</div>
</div><!-- fragment --><p>If you are working on Windows, then you are finished now and everything should work. The <code>qmixsdk</code> module contains code that ensures, that the shared libraries are found.</p>
<p>If you use the Python integration on Linux, then you need to set the <code>LD_LIBRARY_PATH</code> environment variable properly to enable the ctypes module to find the shared libraries of the CETONI SDK. It is not possible to do this inside of your Python script, you need to do this before you run your python scripts. The <code>LD_LIBRARY_PATH</code> needs to point to the lib folder of the CETONI SDK. Look into <code>run_pytest.sh</code> to see how the script calls the python tests. So that means, on Linux you need to export the following environment variables:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;export QMIXSDK_PATH=&quot;$HOME/QmixSDK_Linux&quot;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;export PYTHONPATH=&quot;$QMIXSDK_PATH/python&quot;:&quot;$PYTHONPATH&quot;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;export LD_LIBRARY_PATH=&quot;$QMIXSDK_PATH/lib&quot;:&quot;$LD_LIBRARY_PATH&quot;</div>
</div><!-- fragment --><p>Alternatively you can use the provided wrapper script <code>qmixsdk_py_wrapper.sh</code> instead of calling <code>python</code> when executing your scripts:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;~/QmixSDK_Linux/python/qmixsdk_py_wrapper my_qmix_python_script.py</div>
</div><!-- fragment --><p>Now you can import the CETONI SDK modules and use them:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">from</span> qmixsdk <span class="keyword">import</span> qmixbus</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">from</span> qmixsdk <span class="keyword">import</span> qmixpump</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">from</span> qmixsdk <span class="keyword">import</span> qmixvalve</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">from</span> qmixsdk.qmixbus <span class="keyword">import</span> UnitPrefix, TimeUnit</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;bus = qmixbus.Bus()</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;...</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Make sure to use the correct SDK version (32-bit or 64-bit) for your Python installation. If you are using the 64-bit version of Python, you also need the 64-bit version of the CETONI SDK.</dd></dl>
<p>The Python integration was developed and tested with Python 3.6.5. and Python 3.8.2 </p><hr/>
<h1><a class="anchor" id="QmixSDK_Python_GettingStarted"></a>
Getting Started</h1>
<p>Read the <a class="el" href="GettingStarted.html">Getting Started</a> section to get started using the CETONI SDK functions of the Python integration. The source code of the tests will also help you to understand how to use the Qmix Python integration. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Jun 23 2021 07:50:34 for CETONI SDK by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
